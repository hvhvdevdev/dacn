(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{703:function(e,t,l){"use strict";l.r(t);var o=l(111),n=l(127),d=l(69),r=l(370),m=l(621),c=l(615),f=l(138),v=l(369),_=l(687),h=l(227),w=(l(37),l(194),l(16)),x=(l(81),l(12),l(95),l(6),{name:"Edit",data:function(){return{modelName:this.$route.query.model,formIsValid:!1,notEmpty:[function(e){return!!e||"This field must not be empty"}],widgets:["text","number","select","rich-text","date"],loading:!1,model:{name:"",identifier:"code",fields:[{field:"code",widget:"text"}]}}},computed:{models:function(){return this.$store.getters["models/getModels"]}},mounted:function(){var e=this;this.model=JSON.parse(JSON.stringify(this.models.find((function(t){return t.name===e.modelName}))))},methods:{addField:function(){this.model.fields.push({field:"",widget:"text"})},updateModel:function(){var e=this;return Object(w.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$store.dispatch("models/updateModel",{modelName:e.modelName,newModel:e.model});case 3:return e.$store.commit("setSnackbarContent","Model updated successfully"),t.next=6,e.$router.push("/models");case 6:case"end":return t.stop()}}),t)})))()}}}),k=l(113),component=Object(k.a)(x,(function(){var e=this,t=e._self._c;return t(v.a,{attrs:{justify:"center"}},[t(r.a,{attrs:{cols:"12"}},[t("h1",[e._v("Edit Model")])]),e._v(" "),t(r.a,{attrs:{cols:"12",sm:"10",md:"8"}},[t(n.a,[t(d.c,[e._v("Editing Model `"+e._s(e.modelName)+"`")]),e._v(" "),t(d.b,[t(c.a,{model:{value:e.formIsValid,callback:function(t){e.formIsValid=t},expression:"formIsValid"}},[t(h.a,{attrs:{rules:e.notEmpty,label:"Name"},model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}}),e._v(" "),t(_.a,{attrs:{rules:e.notEmpty,items:e.model.fields,"item-value":"field","item-text":"field",label:"Identifier"},model:{value:e.model.identifier,callback:function(t){e.$set(e.model,"identifier",t)},expression:"model.identifier"}}),e._v(" "),e._l(e.model.fields,(function(l,n){return t("div",{key:n},[t(m.a),e._v(" "),t(v.a,{attrs:{align:"center"}},[t(r.a,{staticClass:"text-right",attrs:{cols:"1"}},[t(o.a,{attrs:{color:"error",icon:""},on:{click:function(t){return e.model.fields.splice(n,1)}}},[t(f.a,[e._v("mdi-close")])],1)],1),e._v(" "),t(r.a,{attrs:{cols:"11",md:"4"}},[t(h.a,{attrs:{"prepend-inner-icon":"mdi-pencil-box-outline",rules:e.notEmpty,label:"Field Name"},model:{value:l.field,callback:function(t){e.$set(l,"field",t)},expression:"field.field"}})],1),e._v(" "),t(r.a,{attrs:{cols:"12",md:"3"}},[t(_.a,{attrs:{"prepend-inner-icon":"mdi-widgets-outline",label:"Widget",rules:e.notEmpty,items:e.widgets},model:{value:l.widget,callback:function(t){e.$set(l,"widget",t)},expression:"field.widget"}})],1),e._v(" "),t(r.a,{attrs:{cols:"12",md:"4"}},["select"===l.widget?t(_.a,{attrs:{"prepend-inner-icon":"mdi-book-open-outline",label:"Model",items:e.models,"item-text":"name","item-value":"name"},model:{value:l.model,callback:function(t){e.$set(l,"model",t)},expression:"field.model"}}):e._e()],1)],1)],1)})),e._v(" "),t(o.a,{attrs:{color:"success"},on:{click:e.addField}},[t(f.a,{attrs:{left:""}},[e._v("mdi-plus")]),e._v("\n            Field\n          ")],1),e._v(" "),t(o.a,{attrs:{disabled:!e.formIsValid,color:"primary",loading:e.loading},on:{click:e.updateModel}},[t(f.a,{attrs:{left:""}},[e._v("mdi-content-save")]),e._v("\n            Save\n          ")],1)],2)],1)],1)],1)],1)}),[],!1,null,"5a8cecc2",null);t.default=component.exports}}]);